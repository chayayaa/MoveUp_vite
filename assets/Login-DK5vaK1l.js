import{q as f,f as m,k as w,c as h,b as s,a,w as V,A as v,r as l,o as g,n as d}from"./index-CRSfcWBD.js";import{S as b}from"./sweetalert2.all-CUpMDFVy.js";import{m as k}from"./api-wHJjAYCR.js";const x={class:"container mt-5"},y={class:"row justify-content-center mt-3 text-white"},B={class:"col-5"},C=s("h1",{class:"font-weight-normal text-center"}," 請先登入 ",-1),E={class:"mt-4"},F=s("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),N={__name:"Login",setup(q,{emit:S}){const u=f();m({loadingItem:""}),m(!1);const o=w({user:{username:"",password:""}});async function p(){try{const t=o.user,e=await k(t);if(e.data.success){const{token:r}=e.data;v.defaults.headers.common.Authorization=`Bearer ${r}`,u.push("/admin/products")}}catch(t){console.log(t),b.fire({title:"失敗!",text:"帳號或密碼錯誤，請重新登入",allowOutsideClick:!1,icon:"error"})}}return(t,e)=>{const r=l("VField"),i=l("ErrorMessage"),_=l("VForm");return g(),h("div",x,[s("div",y,[s("div",B,[C,a(_,{class:"form-signin",onSubmit:p},{default:V(({errors:c})=>[s("div",null,[a(r,{id:"email",modelValue:o.user.username,"onUpdate:modelValue":e[0]||(e[0]=n=>o.user.username=n),name:"email",type:"email",class:d(["form-control",{"is-invalid":c.email}]),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue","class"]),a(i,{name:"email",class:"invalid-feedback"})]),s("div",E,[a(r,{id:"password",modelValue:o.user.password,"onUpdate:modelValue":e[1]||(e[1]=n=>o.user.password=n),name:"password",type:"password",class:d(["form-control",{"is-invalid":c.password}]),placeholder:"請輸入密碼",rules:"required"},null,8,["modelValue","class"]),a(i,{name:"password",class:"invalid-feedback"})]),F]),_:1})])])])}}};export{N as default};
