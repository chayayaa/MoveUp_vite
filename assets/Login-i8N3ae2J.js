import{u as f,f as c,l as w,c as h,a as o,b as s,w as v,F as V,y as g,r as l,o as b,n as d}from"./index-DM-pJ6u8.js";import{S as y}from"./sweetalert2.all-CSWagdpp.js";import{m as x}from"./_plugin-vue_export-helper-DuOzn-xM.js";import{N as k}from"./NavComponent-B4g5ixYk.js";const F={class:"container mt-5 pt-5"},B={class:"row justify-content-center mt-3 text-white"},C={class:"col-5"},E=s("h1",{class:"font-weight-normal text-center"}," 請先登入 ",-1),N={class:"mt-4"},S=s("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),I={__name:"Login",setup(q,{emit:z}){const u=f();c({loadingItem:""}),c(!1);const a=w({user:{username:"",password:""}});async function p(){try{const t=a.user,e=await x(t);if(e.data.success){const{token:r}=e.data;g.defaults.headers.common.Authorization=`Bearer ${r}`,u.push("/admin/products")}}catch(t){console.log(t),y.fire({title:"失敗!",text:"帳號或密碼錯誤，請重新登入",allowOutsideClick:!1,icon:"error"})}}return(t,e)=>{const r=l("VField"),i=l("ErrorMessage"),_=l("VForm");return b(),h(V,null,[o(k),s("div",F,[s("div",B,[s("div",C,[E,o(_,{class:"form-signin",onSubmit:p},{default:v(({errors:m})=>[s("div",null,[o(r,{id:"email",modelValue:a.user.username,"onUpdate:modelValue":e[0]||(e[0]=n=>a.user.username=n),name:"email",type:"email",class:d(["form-control",{"is-invalid":m.email}]),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue","class"]),o(i,{name:"email",class:"invalid-feedback"})]),s("div",N,[o(r,{id:"password",modelValue:a.user.password,"onUpdate:modelValue":e[1]||(e[1]=n=>a.user.password=n),name:"password",type:"password",class:d(["form-control",{"is-invalid":m.password}]),placeholder:"請輸入密碼",rules:"required"},null,8,["modelValue","class"]),o(i,{name:"password",class:"invalid-feedback"})]),S]),_:1})])])])],64)}}};export{I as default};
