import{u as f,f as d,l as w,c as g,a as o,b as s,w as h,F as v,y as V,r as m,o as x,n as u}from"./index-F2dO-BwB.js";import{S as b}from"./sweetalert2.all-CVbumA-n.js";import{m as k}from"./_plugin-vue_export-helper-C3ExIT1t.js";import{N as y}from"./NavComponent-DLW9C5E3.js";const F={class:"container mt-5 pt-5"},E={class:"row justify-content-center mt-3 text-white"},S={class:"col-5"},B=s("h1",{class:"font-weight-normal text-center"}," 請先登入 ",-1),C={class:"mt-4"},N=s("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1),j={__name:"Login",setup(I,{emit:q}){const p=f();d({loadingItem:""}),d(!1);const t=w({user:{username:"",password:""}});async function _(){try{const r=t.user,e=await k(r);if(e.data.success){const{token:a}=e.data,{expired:n}=e.data,l=new Date().getTime()+10*60*1e3;localStorage.setItem("token",a),localStorage.setItem("tokenExpiration",l),V.defaults.headers.common.Authorization=`Bearer ${a}`,p.push("/admin/products")}}catch(r){console.log(r),b.fire({title:"失敗!",text:"帳號或密碼錯誤，請重新登入",allowOutsideClick:!1,icon:"error"})}}return(r,e)=>{const a=m("VField"),n=m("ErrorMessage"),l=m("VForm");return x(),g(v,null,[o(y),s("div",F,[s("div",E,[s("div",S,[B,o(l,{class:"form-signin",onSubmit:_},{default:h(({errors:c})=>[s("div",null,[o(a,{id:"email",modelValue:t.user.username,"onUpdate:modelValue":e[0]||(e[0]=i=>t.user.username=i),name:"email",type:"email",class:u(["form-control",{"is-invalid":c.email}]),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue","class"]),o(n,{name:"email",class:"invalid-feedback"})]),s("div",C,[o(a,{id:"password",modelValue:t.user.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.user.password=i),name:"password",type:"password",class:u(["form-control",{"is-invalid":c.password}]),placeholder:"請輸入密碼",rules:"required"},null,8,["modelValue","class"]),o(n,{name:"password",class:"invalid-feedback"})]),N]),_:1})])])])],64)}}};export{j as default};
