import{u as q,f,l as N,g as U,c as p,a as t,b as e,F as g,i as E,p as M,t as r,w as y,d as A,r as _,o as v,n as c,m as P,v as T,e as b}from"./index-F2dO-BwB.js";import{g as L,f as $}from"./_plugin-vue_export-helper-C3ExIT1t.js";import{N as B}from"./NavComponent-DLW9C5E3.js";import{F as I}from"./FooterComponent-Dfpnc_Yk.js";const S={class:"mt-5 pt-5 about"},z={class:"pt-5 px-5 container"},D=A('<div class="row"><div class="col-md-8 col-sm-5 mb-3"><div class="step-bar"><ul class="step-bar_list"><li class="step-bar_item step-bar_item--first"><div class="step-bar_circle step-bar_circle--active"><span>1</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="mx-2 text-light">購物車</span></div></li><li class="step-bar_item step-bar_item--secondary"><div class="step-bar_circle step-bar_circle--active"><span>2</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="text-light">結帳</span></div></li><li class="step-bar_item step-bar_item--last"><div class="step-bar_circle"><span>3</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="text-light">購買完成</span></div></li></ul></div></div></div>',1),O={class:"row"},G={class:"col-md-8 col-sm-5"},R=e("h3",{class:"text-white font-weight-bold mb-0 mt-4 mt-md-0 mb-2"},"確認訂單",-1),W={class:"border-white"},j={class:"table align-middle"},H=e("thead",null,[e("tr",null,[e("th",null,"商品"),e("th",{style:{width:"110px"}},"數量"),e("th",null,"單價"),e("th",null,"合計")])],-1),J={style:{width:"5%"}},K={class:"rounded-0",style:{"background-size":"cover","background-position":"center"}},Q=["src"],X={class:"d-flex flex-column align-items-stretch"},Y={class:"fs-3 mb-4"},Z={class:"fs-5"},ee=e("tfoot",null,null,-1),se=e("td",{colspan:"3",class:"text-end"},"總計:",-1),te={class:"col-md-4 text-white"},le=e("h3",{class:"font-weight-bold mb-0 mt-4 mt-md-0"},"填寫訂購資訊",-1),ae=e("hr",{class:"border-white hr-border-width"},null,-1),oe=e("label",{for:"email",class:"form-label"},[e("span",{class:"text-danger"},"* "),b(" Email")],-1),ie=e("label",{for:"name",class:"form-label"},[e("span",{class:"text-danger"},"* "),b(" 收件人姓名")],-1),ne=e("label",{for:"tel",class:"form-label"},[e("span",{class:"text-danger"},"* "),b(" 收件人電話")],-1),de=e("label",{for:"address",class:"form-label"},[e("span",{class:"text-danger"},"* "),b(" 收件人地址")],-1),re=e("label",{class:"text-left w-100"},"付款方式",-1),ce=e("option",{disabled:"",value:"",selected:""},"請選擇付款方式",-1),ue=e("option",{value:"1"},"WebATM",-1),me=e("option",{value:"2"},"ATM",-1),pe=e("option",{value:"3"},"Credit",-1),_e=e("option",{value:"4"},"ApplePay",-1),ve=e("option",{value:"5"},"GooglePay",-1),be=e("label",{for:"message",class:"form-label"},"留言",-1),he=e("div",{class:"text-end mt-3"},[e("button",{type:"submit",class:"btn btn-primary",style:{margin:"0px"}},"送出訂單")],-1),ke={__name:"Checkout",setup(fe,{emit:ge}){const V=q(),u=f(!1),h=f(0),m=f([]),l=N({user:{name:"",email:"",tel:"",address:"",payment:""},message:""});U(async()=>{await w(),x()});async function w(){u.value=!0;try{const i=await L();m.value=i.data.data.carts,x()}catch(i){console.log(i)}}function x(){h.value=0,m.value.forEach(i=>{h.value+=i.final_total}),u.value=!1}async function k(){u.value=!0;const i=l;try{const s=await $(i);s.data.success&&V.push(`/complete/${s.data.orderId}`)}catch(s){console.log(s)}}return(i,s)=>{const C=_("Loading"),n=_("VField"),d=_("ErrorMessage"),F=_("VForm");return v(),p(g,null,[t(B),e("div",null,[t(C,{active:u.value},null,8,["active"])]),e("div",S,[e("div",z,[D,e("div",O,[e("div",G,[R,e("div",W,[e("table",j,[H,e("tbody",null,[m.value.length>0?(v(),p(g,{key:0},[(v(!0),p(g,null,E(m.value,(a,o)=>(v(),p("tr",{key:a.id},[e("td",J,[e("div",K,[e("img",{src:a.product.imageUrl,class:"cart_img"},null,8,Q)])]),e("td",null,[e("div",X,[e("div",Y,r(a.product.title),1),e("div",Z,r(a.qty)+"堂",1)])]),e("td",null," $"+r(a.product.price),1),e("td",null,"$"+r(a.product.price*a.qty),1)]))),128)),ee],64)):M("",!0)]),e("tfoot",null,[e("tr",null,[se,e("td",null,"$"+r(h.value),1)])])])])]),e("div",te,[le,ae,t(F,{onSubmit:k},{default:y(({errors:a})=>[e("div",null,[oe,t(n,{id:"email",modelValue:l.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>l.user.email=o),name:"email",type:"email",class:c(["form-control",{"is-invalid":a.email}]),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue","class"]),t(d,{name:"email",class:"invalid-feedback"})]),e("div",null,[ie,t(n,{id:"name",modelValue:l.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>l.user.name=o),name:"姓名",type:"text",class:c(["form-control",{"is-invalid":a.姓名}]),placeholder:"請輸入姓名",rules:"required"},null,8,["modelValue","class"]),t(d,{name:"姓名",class:"invalid-feedback"})]),e("div",null,[ne,t(n,{id:"tel",modelValue:l.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>l.user.tel=o),name:"電話",type:"text",class:c(["form-control",{"is-invalid":a.電話}]),placeholder:"請輸入電話",rules:"required|min:8|numeric"},null,8,["modelValue","class"]),t(d,{name:"電話",class:"invalid-feedback"})]),e("div",null,[de,t(n,{id:"address",modelValue:l.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>l.user.address=o),name:"地址",type:"text",class:c(["form-control",{"is-invalid":a.地址}]),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue","class"]),t(d,{name:"地址",class:"invalid-feedback"})]),re,t(n,{name:"付款方式",as:"select",class:c(["form-select",{"is-invalid":a.付款方式}]),modelValue:l.user.payment,"onUpdate:modelValue":s[4]||(s[4]=o=>l.user.payment=o),rules:"required"},{default:y(()=>[ce,ue,me,pe,_e,ve]),_:2},1032,["modelValue","class"]),t(d,{name:"付款方式",class:"invalid-feedback"}),e("div",null,[be,P(e("textarea",{name:"",id:"message","onUpdate:modelValue":s[5]||(s[5]=o=>l.message=o),class:"form-control",cols:"30",rows:"10"},null,512),[[T,l.message]])]),he]),_:1})])])])]),t(I)],64)}}};export{ke as default};
