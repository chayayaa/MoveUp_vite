import{S as q}from"./sweetalert2.all-jWYCDLvl.js";import{g as I,d as N,e as $}from"./_plugin-vue_export-helper-B5H5ynSv.js";import{N as S}from"./NavComponent-B16ea1ss.js";import{F as B}from"./FooterComponent-DM5Kke19.js";import{f as d,g as F,h as L,c as n,a as v,b as t,F as y,i as P,t as _,j as V,w as A,d as D,r as g,o,e as E}from"./index-BzdrLKoH.js";const T={class:"mt-5 pt-5 about"},j={class:"pt-5 px-5 container"},z=D('<div class="row mb-2"><div class="col-md-8 col-sm-5"><div class="step-bar"><ul class="step-bar_list"><li class="step-bar_item step-bar_item--first"><div class="step-bar_circle step-bar_circle--active"><span>1</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="mx-2 text-light">購物車</span></div></li><li class="step-bar_item step-bar_item--secondary"><div class="step-bar_circle"><span>2</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="text-light">結帳</span></div></li><li class="step-bar_item step-bar_item--last"><div class="step-bar_circle"><span>3</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="text-light">購買完成</span></div></li></ul></div></div></div>',1),M={class:"row"},O={class:"col-md-8 col-sm-5"},U={class:"border-white"},G={class:"table align-middle"},H=t("thead",null,[t("tr",null,[t("th"),t("th",null,"商品"),t("th",{style:{width:"110px"}},"數量"),t("th",null,"單價")])],-1),J={style:{width:"5%"}},K=["onClick","disabled"],Q=t("i",{class:"bi bi-trash-fill"},null,-1),R=[Q],W={style:{width:"5%"}},X={class:"rounded-0",style:{"background-size":"cover","background-position":"center"}},Y=["src"],Z={class:"d-flex flex-column align-items-stretch"},tt={class:"fs-1 mb-4"},st={class:"input-group input-group-sm"},et=["disabled","onClick"],at=["value","id"],lt=["onClick"],ot={key:1,colspan:"4",class:"text-center text-light fs-2"},it={class:"col-md-4 mt-2"},ct={class:"checkout_summary"},nt=t("div",{class:"checkout_summary-title heading-tertiary--dark"}," 訂單明細 ",-1),rt={class:"checkout_summary-price"},dt=t("div",null,"原價",-1),_t={class:"checkout_summary-total"},ut=t("div",null,"總計",-1),pt=t("div",{class:"form_row"},null,-1),vt={key:1,class:"btn btn-primary--cancel"},kt={__name:"Cart",setup(ht,{emit:f}){const h=d({loadingItem:""}),a=d(!1),k=f,l=d(0),i=d([]);F(async()=>{await u()});async function u(){a.value=!0;try{const e=await I();i.value=e.data.data.carts,a.value=!1,w()}catch(e){console.log(e)}}async function x(e){a.value=!0;try{const c=await N(e);u()}catch(c){console.log(c)}h.value.loadingItem=""}async function b(e,c,p){try{const s=await $(e,{product_id:c,qty:p});u()}catch(r){console.log(r),q.fire({title:"失敗!",text:"請聯繫客服",allowOutsideClick:!1,icon:"error"})}}function w(){a.value=!0,l.value=0,i.value.forEach(e=>{l.value+=e.final_total}),a.value=!1}return L(l,()=>{k("someEvent",l.value)}),(e,c)=>{const p=g("Loading"),r=g("router-link");return o(),n(y,null,[v(S),t("div",null,[v(p,{active:a.value},null,8,["active"])]),t("div",T,[t("div",j,[z,t("div",M,[t("div",O,[t("div",U,[t("table",G,[H,t("tbody",null,[i.value.length>0?(o(!0),n(y,{key:0},P(i.value,(s,C)=>(o(),n("tr",{key:s.id},[t("td",J,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:m=>x(s.id),disabled:h.value.loadingItem===s.id},R,8,K)]),t("td",W,[t("div",X,[t("img",{src:s.product.imageUrl,class:"cart_img"},null,8,Y)])]),t("td",null,[t("div",Z,[t("div",tt,_(s.product.title),1),t("div",st,[t("button",{class:"border border-gray-500 px-2 py-1 bg-gray-500",disabled:s.qty===1,onClick:m=>{s.qty--,b(s.id,s.product.id,s.qty)}}," - ",8,et),t("input",{type:"number",class:"quantity border border-gray-500 text-center w-4 py-1 price",min:"1",value:s.qty,id:"quantityInput_"+C},null,8,at),t("button",{class:"border border-gray-500 px-2 py-1 bg-gray-500",onClick:m=>{s.qty++,b(s.id,s.product.id,s.qty)}}," + ",8,lt)])])]),t("td",null," $"+_(s.product.price),1)]))),128)):(o(),n("td",ot,"購物車無商品，快來去逛逛!"))])])])]),t("div",it,[t("div",ct,[nt,t("div",rt,[dt,t("div",null,"$"+_(l.value),1)]),t("div",_t,[ut,t("h3",null,"$"+_(l.value),1)]),pt,i.value.length>0?(o(),V(r,{key:0,to:"/checkout",class:"btn btn-primary",style:{margin:"0px"}},{default:A(()=>[E("結帳")]),_:1})):(o(),n("button",vt," 請選擇 "))])])])])]),v(B)],64)}}};export{kt as default};
