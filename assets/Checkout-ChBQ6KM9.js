import{q as C,f as u,k as F,g as N,c as p,a,b as e,F as f,i as U,m as E,t as r,w as y,d as M,r as g,o as _,n as c,l as A,v as P,e as v}from"./index-CRSfcWBD.js";import{g as T,f as I}from"./api-wHJjAYCR.js";import{N as $}from"./NavComponent-DgH0bBaw.js";import{F as B}from"./FooterComponent-Bjy2HOxr.js";const S={class:"mt-5 pt-5 about"},z={class:"pt-5 px-5 container"},D=M('<div class="row"><div class="col-md-8 col-sm-5 mb-3"><div class="step-bar"><ul class="step-bar_list"><li class="step-bar_item step-bar_item--first"><div class="step-bar_circle step-bar_circle--active"><span>1</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="mx-2 text-light">購物車</span></div></li><li class="step-bar_item step-bar_item--secondary"><div class="step-bar_circle step-bar_circle--active"><span>2</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="text-light">結帳</span></div></li><li class="step-bar_item step-bar_item--last"><div class="step-bar_circle"><span>3</span></div><div class="step-bar_line"></div><div class="step-bar_title"><span class="text-light">購買完成</span></div></li></ul></div></div></div>',1),L={class:"row"},O={class:"col-md-8 col-sm-5"},G=e("h3",{class:"text-white font-weight-bold mb-0 mt-4 mt-md-0 mb-2"},"確認訂單",-1),R={class:"border-white"},W={class:"table align-middle"},j=e("thead",null,[e("tr",null,[e("th",null,"商品"),e("th",{style:{width:"110px"}},"數量"),e("th",null,"單價"),e("th",null,"合計")])],-1),H={style:{width:"5%"}},J={class:"rounded-0",style:{"background-size":"cover","background-position":"center"}},K=["src"],Q={class:"d-flex flex-column align-items-stretch"},X={class:"fs-3 mb-4"},Y={class:"fs-5"},Z=e("tfoot",null,null,-1),ee=e("td",{colspan:"3",class:"text-end"},"總計:",-1),se={class:"col-md-4 text-white"},te=e("h3",{class:"font-weight-bold mb-0 mt-4 mt-md-0"},"填寫訂購資訊",-1),le=e("hr",{class:"border-white hr-border-width"},null,-1),ae=e("label",{for:"email",class:"form-label"},[e("span",{class:"text-danger"},"* "),v(" Email")],-1),oe=e("label",{for:"name",class:"form-label"},[e("span",{class:"text-danger"},"* "),v(" 收件人姓名")],-1),ie=e("label",{for:"tel",class:"form-label"},[e("span",{class:"text-danger"},"* "),v(" 收件人電話")],-1),de=e("label",{for:"address",class:"form-label"},[e("span",{class:"text-danger"},"* "),v(" 收件人地址")],-1),ne=e("label",{class:"text-left w-100"},"付款方式",-1),re=e("option",{disabled:"",value:"",selected:""},"請選擇付款方式",-1),ce=e("option",{value:"1"},"WebATM",-1),me=e("option",{value:"2"},"ATM",-1),ue=e("option",{value:"3"},"Credit",-1),pe=e("option",{value:"4"},"ApplePay",-1),_e=e("option",{value:"5"},"GooglePay",-1),ve=e("label",{for:"message",class:"form-label"},"留言",-1),be=e("div",{class:"text-end mt-3"},[e("button",{type:"submit",class:"btn btn-primary",style:{margin:"0px"}},"送出訂單")],-1),we={__name:"Checkout",setup(he,{emit:fe}){const V=C();u({loadingItem:""});const b=u(!1),h=u(0),m=u([]),t=F({user:{name:"",email:"",tel:"",address:"",payment:""},message:""});N(async()=>{await w(),x()});async function w(){b.value=!0;try{const i=await T();m.value=i.data.data.carts,b.value=!1,x()}catch(i){console.log(i)}}function x(){h.value=0,m.value.forEach(i=>{h.value+=i.final_total})}async function k(){b.value=!0;const i=t;try{const s=await I(i);s.data.success&&V.push(`/complete/${s.data.orderId}`)}catch(s){console.log(s)}}return(i,s)=>{const d=g("VField"),n=g("ErrorMessage"),q=g("VForm");return _(),p(f,null,[a($),e("div",S,[e("div",z,[D,e("div",L,[e("div",O,[G,e("div",R,[e("table",W,[j,e("tbody",null,[m.value.length>0?(_(),p(f,{key:0},[(_(!0),p(f,null,U(m.value,(l,o)=>(_(),p("tr",{key:l.id},[e("td",H,[e("div",J,[e("img",{src:l.product.imageUrl,class:"cart_img"},null,8,K)])]),e("td",null,[e("div",Q,[e("div",X,r(l.product.title),1),e("div",Y,r(l.qty)+"堂",1)])]),e("td",null," $"+r(l.product.price),1),e("td",null,"$"+r(l.product.price*l.qty),1)]))),128)),Z],64)):E("",!0)]),e("tfoot",null,[e("tr",null,[ee,e("td",null,"$"+r(h.value),1)])])])])]),e("div",se,[te,le,a(q,{onSubmit:k},{default:y(({errors:l})=>[e("div",null,[ae,a(d,{id:"email",modelValue:t.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>t.user.email=o),name:"email",type:"email",class:c(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue","class"]),a(n,{name:"email",class:"invalid-feedback"})]),e("div",null,[oe,a(d,{id:"name",modelValue:t.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.user.name=o),name:"姓名",type:"text",class:c(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required"},null,8,["modelValue","class"]),a(n,{name:"姓名",class:"invalid-feedback"})]),e("div",null,[ie,a(d,{id:"tel",modelValue:t.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>t.user.tel=o),name:"電話",type:"text",class:c(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required|min:8|numeric"},null,8,["modelValue","class"]),a(n,{name:"電話",class:"invalid-feedback"})]),e("div",null,[de,a(d,{id:"address",modelValue:t.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>t.user.address=o),name:"地址",type:"text",class:c(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue","class"]),a(n,{name:"地址",class:"invalid-feedback"})]),ne,a(d,{name:"付款方式",as:"select",class:c(["form-select",{"is-invalid":l.付款方式}]),modelValue:t.user.payment,"onUpdate:modelValue":s[4]||(s[4]=o=>t.user.payment=o),rules:"required"},{default:y(()=>[re,ce,me,ue,pe,_e]),_:2},1032,["modelValue","class"]),a(n,{name:"付款方式",class:"invalid-feedback"}),e("div",null,[ve,A(e("textarea",{name:"",id:"message","onUpdate:modelValue":s[5]||(s[5]=o=>t.message=o),class:"form-control",cols:"30",rows:"10"},null,512),[[P,t.message]])]),be]),_:1})])])])]),a(B)],64)}}};export{we as default};
