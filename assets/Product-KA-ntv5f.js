import{u as C,f as u,k as P,l as $,g as N,c as i,a as h,b as t,t as n,n as q,m as F,v as D,p as g,F as m,i as B,o as r}from"./index-BzdrLKoH.js";import{S as b}from"./sweetalert2.all-jWYCDLvl.js";import{a as S,b as U,c as V}from"./_plugin-vue_export-helper-B5H5ynSv.js";import{N as j}from"./NavComponent-B16ea1ss.js";import{F as A}from"./FooterComponent-DM5Kke19.js";const z={class:"mt-5 pt-5 about"},E={class:"container main-content pt-5 px-5"},L={key:0,class:"row align-products-center mb-4"},M={class:"col-lg-5 text-white"},R={class:"rounded-0",style:{height:"400px","background-size":"cover","background-position":"center"}},T=["src"],O={class:"col-lg-7 mt-3 text-white"},G={class:"font-weight-bold h1 mb-5"},H=t("p",{class:"mb-0 text-muted text-right"},[t("del",null,"NT$ 180")],-1),J={class:"card-text mb-4"},K={class:"fs-1 fw-bold",style:{color:"#FFD700"}},Q={class:"text-light ms-2"},W={class:"row"},X={class:"d-flex col-12"},Y={class:"flex items-center justify-center pt-3 px-3"},Z=["disabled"],tt={class:"col-4"},st={class:"btn-group d-flex justify-content-center my-3 mr-4"},et=t("hr",null,null,-1),ot={class:"mx-5"},at=t("h2",{class:"font-weight-bold mt-4 text-white text-center"},"推薦商品",-1),ct={key:0,class:"row"},nt={class:"card mb-4 position-relative bg-dark border mx-3"},it=["src"],rt={class:"card-body"},lt={class:"text-white fw-bold"},dt={class:"card-text mb-4"},ut={class:"fs-1 fw-bold",style:{color:"#FFD700"}},_t={class:"text-light ms-2"},pt={class:"btn-group d-flex justify-content-center"},vt=["onClick"],wt={__name:"Product",setup(ht){const y=C(),l=u(!1),f=P(),c=u(1),d=u([]),o=$({Id:"",categoryName:"",price:0,imageUrl:""});N(async()=>{o.Id=f.path.split("/")[2],await _(o.Id),await x()});async function _(a){l.value=!0;try{const s=await S(a);o.value=s.data.product,l.value=!1}catch(s){console.log(s)}}async function x(){l.value=!0;try{const a=await U();d.value=a.data.products.slice(0,3),l.value=!1}catch(a){console.log(a)}}async function w(a){const s=document.getElementById("quantityInput").value;var e=parseInt(s,10),p=isNaN(e)?0:e;try{(await V({product_id:a,qty:p})).data.success&&b.fire({title:"成功!",text:"已加入購物車",icon:"success"}).then(async I=>{I.isConfirmed&&window.location.reload()})}catch(v){console.log(v),b.fire({title:"失敗!",text:"請聯繫客服",allowOutsideClick:!1,icon:"error"})}}async function k(a){y.push(`/product/${a}`),await _(o.Id),window.location.reload()}return(a,s)=>(r(),i(m,null,[h(j),t("div",z,[t("div",E,[o.value?(r(),i("div",L,[t("div",M,[t("div",R,[t("img",{src:o.value.imageUrl,class:"card-img-top"},null,8,T)])]),t("div",O,[t("h2",G,n(o.value.title),1),t("p",null,n(o.value.description),1),H,t("p",J,[t("span",K,"$"+n(o.value.price),1),t("del",Q,"$ "+n(o.value.origin_price)+" 元 ",1)]),t("div",W,[t("div",X,[t("div",Y,[t("button",{class:q(["border border-gray-500 px-2 py-2 bg-gray-500",{"bg-gray-100":c.value===1,"bg-gray-200":c.value!==1}]),disabled:c.value===1,onClick:s[0]||(s[0]=e=>c.value--)}," - ",10,Z),F(t("input",{type:"number",class:"quantity border border-gray-500 text-center w-16 py-2 price",min:"1","onUpdate:modelValue":s[1]||(s[1]=e=>c.value=e),id:"quantityInput"},null,512),[[D,c.value]]),t("button",{class:"border border-gray-500 px-2 py-2 bg-gray-200",onClick:s[2]||(s[2]=e=>c.value++)}," + ")]),t("div",tt,[t("div",st,[t("button",{class:"btn btn-primary text-white btn-block",onClick:s[3]||(s[3]=e=>w(o.value.id))},"加入購物車")])])])])])])):g("",!0),et,t("div",ot,[at,d.value.length>0?(r(),i("div",ct,[(r(!0),i(m,null,B(d.value,e=>(r(),i("div",{class:"col-md-4",key:e.id},[t("div",nt,[t("img",{src:e.imageUrl,class:"card-img-top",style:{height:"200px"}},null,8,it),t("div",rt,[t("h3",lt,n(e.title),1),t("p",dt,[t("span",ut,"$"+n(e.price),1),t("del",_t,"$ "+n(e.origin_price)+" 元 ",1)]),t("div",pt,[t("button",{class:"btn btn-primary text-white mt-2 btn-block",onClick:p=>k(e.id)}," 查看更多 ",8,vt)])])])]))),128))])):g("",!0)])])]),h(A)],64))}};export{wt as default};
